# 案例测试

objective:

* 做这本书的温习，并为每一章画**思维导图（先浏览一遍章节内容，在看自己能画多少。）**
* 做案例总结，熟悉之前学到的知识，形成体系。

___

#### test one

对象：Bitly的USA.gov数据

处理过程：

1.json对象，读取前10行数据，每行数据输出

2.对数据中时区进行计数

3.时区前十名的地方存储为barv.csv，并⽤seaborn包或用origin创建水平柱状图

4.对数据集中**a字段**含有执⾏URL短缩操作的浏览器、设备、应⽤程序的相关信息，分离字符串的第⼀节。

5.~~agent缺失的数据将其移除，计算出各时区是否含有Windows的值。~~

6.根据**时区和新得到的操作系统（windows、not windows）**列表对数据进行分组，并计算**每个时区的（windows、not windows）**的计数。取出最大的10个时区的操作系统计数用柱状图表示。

7.计算同一地区的不同操作系统的比例，取出最大的10个时区的操作系统计数用柱状图表示。

___

#### test two

对象:MovieLens 1M数据集

这些数据中包括电影评分、电影元数据（⻛格类型和年代）以及关于⽤户的⼈⼝统计学数据（年龄、邮编、性别和职业等）。

处理过程：

1.读取三张表read_table，将**ratings**跟users合并到⼀起，然后再将**movies**也合并进去。

2.按性别计算每部电影的平均得分（交叉或者透视表）

3.过滤掉评分数据不够250条的电影（随便选的⼀个数字）。

4.找出女性观众最喜欢的十部电影

5.找出男性和女性观众分歧最大的十部电影（存放平均得分之差的列，并对其进
行排序）

6.再得到分歧最⼤且女性观众更喜欢的电影（这个有意思）

7.找出分歧最大的电影（不考虑性别因素）参考：计算得分数据的方差或标准差

___

#### test three

对象：1880-2010年间全美婴⼉姓名

1.计算指定名字（可以是你自己的，也可以是别⼈的）的年度比例。
2.计算某个名字的相对排名。
3.计算各年度最流⾏的名字，以及增长或减少最快的名字。
4.分析名字趋势：元音、辅音、长度、总体多样性、拼写变化、⾸尾字⺟等。
5.分析外源性趋势：圣经中的名字、名人、人口结构变化等。

处理过程：

1.⽤births列的sex分组小计表示该年度的births总计，计算每年中初生儿的性别，按照时间年限绘图（'name', 'sex', 'births'）。

2.在上一步的基础上，取出sex/year上的前1000个名字。

3.⽣成⼀张按year和name统计的总出生数透视表

4.得到['John', 'Harry', 'Mary', 'Marilyn']名字每年的变化情况。

5.评估命名多样性的增长。计算最流行的1000个名字在总出生人数所占比例，我按year和sex进行聚合并绘图。

~~6.50%统计我不知道作者是怎么做的~~

7.近百年来，男孩名字在最后⼀个字母上的分布发生了显著的变化。

:crying_cat_face:后面的分析有点难，我不太会

___

#### test four

对象：USDA⻝品数据库

美国农业部（USDA）制作了⼀份有关⻝物营养信息的数据库。shley Williams制作了该数据的JSON版（http://ashleyw.co.uk/project/food-nutrient-database）。

每种食物都带有若⼲标识性属性以及两个有关营养成分和分量的列表。

处理过程：

1.加载json数据，统计数据的行数

2.对全部营养数据做⼀些分析，最简单的办法是将所有食物的营养成分整合到⼀个大表中。

![image-20201020201010153](C:\Users\hedan\AppData\Roaming\Typora\typora-user-images\image-20201020201010153.png)

3.根据食物分类和营养类型画出⼀张中位值图

___

#### test five

对象：2012联邦选举委员会数据库（P00000001-ALL.csv）

美国联邦选举委员会发布了有关政治竞选赞助⽅⾯的数据。其中包括赞助者的**姓名、职业、雇主、地址以及出资额**等信息。

处理过程：

1.指明党派信息，key

2.简化分析过程，我限定该数据集只能有正的出资额，进行数据处理。

3.根据职业和雇主统计赞助信息（律师们更倾向于资助⺠主党，⽽企业主则更倾向于资助共和
党。）

4.通过pivot_table根据党派和职业对数据进⾏聚合，然后过滤掉总出资额不足200万美元的数据，柱状图展示。

5.利⽤cut函数根据出资额的大小将数据离散化到多个面元中小额赞助方面，Obama获得的数量比Romney多得多。

![image-20201020201950678](C:\Users\hedan\AppData\Roaming\Typora\typora-user-images\image-20201020201950678.png)

6.根据候选人和州对数据进行聚合

